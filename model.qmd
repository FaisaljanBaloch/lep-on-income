---
title: "Model"
execute: 
  echo: false
---

```{r}
#| message: false
#| warning: false
library(tidyverse)
library(knitr)
library(kableExtra)
```

## Data Generating Mechanism

The outcome variable in our model is the natural logarithm of income (`log_income`), and it is modeled as a linear function of English proficiency (`lep`), education level (`educ_level`), and gender (`gender`). The fitted model is:

$$
\begin{aligned}
\log(\text{income})_i =\;& 9.62 \\
&- 0.0385 \cdot \text{LEP}_i \\
&+ 0.227 \cdot \text{HighSchool}_i \\
&+ 0.274 \cdot \text{SomeCollege}_i \\
&+ 0.402 \cdot \text{Bachelors}_i \\
&+ 1.14 \cdot \text{Graduate}_i \\
&+ 0.419 \cdot \text{Male}_i \\
&+ \varepsilon_i
\end{aligned}
$$

Where:

- **LEP** = 1 if individual has limited English proficiency, 0 otherwise  
- **HighSchool**, **SomeCollege**, **Bachelors**, **Graduate** are dummy variables for education level  
- **Male** = 1 if individual is male, 0 if female  
- The reference category is **female English-proficient individuals with less than high school education**

To recover predicted income in dollars, we exponentiate the log outcome:

$$
\text{income} = \exp(\log(\text{income}))
$$

## Model Estimates

```{r}
regression_results <- tibble(
  Variable = c("Intercept", "Limited English Proficiency", "High School", "Some College",
               "Bachelor's Degree", "Graduate Degree", "Male Gender"),
  Coefficient = c(9.62, -0.0385, 0.227, 0.274, 0.402, 1.14, 0.419),
  `Std Error` = c(0.00703, 0.00992, 0.00744, 0.00914, 0.00752, 0.00720, 0.00332),
  `p-value` = c("<0.001", "<0.001", "<0.001", "<0.001", "<0.001", "<0.001", "<0.001"),
  `95% CI` = c("[9.61, 9.64]", "[-0.058, -0.019]", "[0.212, 0.241]", "[0.256, 0.292]",
               "[0.387, 0.416]", "[1.12, 1.15]", "[0.413, 0.426]")
)

# Create clean table
clean_table <- regression_results |>
  kable(
    caption = "Linear Regression Results: Log Income Model",
    digits = 3,
    align = c("l", "r", "r", "r", "c")
  ) |>
  kable_styling(
    bootstrap_options = c("striped", "condensed"),
    full_width = FALSE,
    font_size = 11
  ) |>
  row_spec(2, background = "#ffffcc") |>  # Highlight LEP
  footnote(general = "Reference: Less than HS education, Female gender")

clean_table
```
